# Swagger

## 介绍

* 使用Swagger，你只需要按照他的规范去定义接口以及接口相关的信息，就可以做到**生成接口文档，以及在线接口调试页面。**
* 官网：http://swagger.io/
* Knife4j是为Java MVC框架集成Swagger生成Api文档的增强解决方案。

```xml
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
    <version>3.0.2</version>
</dependency>
```

## 使用方式

1. 导入Knife4j的maven坐标

2. 在配置类中加入knife4j相关配置

3. 设置静态资源映射，否则接口文档页面无法访问

   * 配置静态资源方法一：创建Java配置类实现WebMvcConfigurer接口

     ```java
     @Configuration
     public class WebConfig implements WebMvcConfigurer {
     
         /**
          * 设置静态资源映射
          * @param registry
          */
         protected void addResourceHandlers(ResourceHandlerRegistry registry) {
             log.info("开始设置静态资源映射");
             registry.addResourceHandler("/doc.html").addResourceLocations("classpath:/META-INF/resources/");
             registry.addResourceHandler("/webjars/**").addResourceLocations("classpath:/META-INF/resources/webjars/");
         }
     }
     ```

   * 配置静态资源方法二：在配置文件中设置静态资源映射

     ```properties
     spring.resources.static-locations=classpath:/META-INF/resources/,classpath:/resources/,classpath:/static/,classpath:/public/
     ```

   * 如果没有配置静态资源映射，Spring Boot会自动从以下classpath路径下查找静态资源：

     ```
     classpath:/META-INF/resources/
     classpath:/resources/
     classpath:/static/
     classpath:/public/
     ```

4. 在WebMvcConfiguration配置类中添加配置项：

   ```java
   /**
    * 通过knife4j生成接口文档
    * @return
    */
   @Bean
   public Docket docket() {
       log.info("准备生成接口文档");
       ApiInfo apiInfo = new ApiInfoBuilder()
               .title("苍穹外卖项目接口文档") //标题
               .version("2.0") // 版本
               .description("苍穹外卖项目接口文档") //描述信息
               .build();
       Docket docket = new Docket(DocumentationType.SWAGGER_2) // Swagger版本
               .apiInfo(apiInfo)
               .select()
   	        // 指定生成接口需要扫描的包（以及子包）
               .apis(RequestHandlerSelectors.basePackage("com.sky.controller"))
               .paths(PathSelectors.any())
               .build();
       return docket;
   }
   ```

## 常用注解

* 通过注解可以控制生成的接口文档，使接口文档拥有更好的可读性，常用注解如下：

  | 注解                        | 说明                                                   |
  | --------------------------- | ------------------------------------------------------ |
  | @Api(tags = "")             | 用在类上，例如Controller，表示对类的说明               |
  | @ApiModel(description = "") | 用在类上，例如entity、DTO、VO                          |
  | @ApiModelProperty("")       | 用在属性上，描述属性信息                               |
  | @ApiOperation("")           | 用在方法上，例如Controller的方法，说明方法的用途、作用 |

  

