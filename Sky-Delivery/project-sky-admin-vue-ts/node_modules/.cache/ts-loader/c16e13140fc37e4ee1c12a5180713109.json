{"remainingRequest":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js??ref--14-2!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\src\\views\\employee\\addEmployee.vue?vue&type=script&lang=ts&","dependencies":[{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\src\\views\\employee\\addEmployee.vue","mtime":1739517951451},{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739450071092},{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\babel-loader\\lib\\index.js","mtime":1739450079482},{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\ts-loader\\index.js","mtime":1739450053695},{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1739450071092},{"path":"F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js","mtime":1739450054687}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _employee = require(\"@/api/employee\");\n\nvar _default = {\n  data: function data() {\n    return {\n      optType: '',\n      ruleForm: {\n        name: '',\n        username: '',\n        sex: '1',\n        phone: '',\n        idNumber: ''\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入员工姓名',\n          trigger: 'blur'\n        }],\n        username: [{\n          required: true,\n          message: '请输入员工账号',\n          trigger: 'blur'\n        }],\n        phone: [{\n          required: true,\n          trigger: 'blur',\n          validator: function validator(rule, value, callback) {\n            // alert(value)\n            if (value === '' || !/^1[3-9]\\d{9}$/.test(value)) {\n              callback(new Error('请输入正确的手机号!'));\n            } else {\n              callback();\n            }\n          }\n        }],\n        idNumber: [{\n          required: true,\n          trigger: 'blur',\n          validator: function validator(rule, value, callback) {\n            // alert(value)\n            if (value === '' || !/(^\\d{15}$)|(^\\d{17}[0-9Xx]$)/.test(value)) {\n              callback(new Error('请输入正确的身份证号!'));\n            } else {\n              callback();\n            }\n          }\n        }]\n      }\n    };\n  },\n  created: function created() {\n    var _this = this;\n\n    // 获取路由参数id，如果有则为修改操作，否则为新增操作\n    this.optType = this.$route.query.id ? 'update' : 'add';\n\n    if (this.optType === 'update') {\n      // 修改操作，根据id查询员工信息，用于回显\n      (0, _employee.queryEmployeeById)(this.$route.query.id).then(function (res) {\n        if (res.data.code === 1) {\n          _this.ruleForm = res.data.data;\n        }\n      });\n    }\n  },\n  methods: {\n    submitForm: function submitForm(formName, isContinue) {\n      var _this2 = this;\n\n      // 进行表单校验\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          // alert('符合要求')\n          // 表单校验通过\n          if (_this2.optType === 'update') {\n            // 修改操作\n            (0, _employee.updateEmployee)(_this2.ruleForm).then(function (res) {\n              if (res.data.code === 1) {\n                _this2.$message.success('员工信息修改成功!');\n\n                _this2.$router.push('/employee');\n              } else {\n                _this2.$message.error(res.data.msg);\n              }\n            });\n            return;\n          } // 发送AJAX请求\n\n\n          (0, _employee.addEmployee)(_this2.ruleForm).then(function (res) {\n            if (res.data.code === 1) {\n              _this2.$message.success('员工添加成功'); // 保存并继续\n\n\n              if (isContinue) {\n                _this2.ruleForm = {\n                  name: '',\n                  username: '',\n                  sex: '1',\n                  phone: '',\n                  idNumber: ''\n                };\n              } else {\n                // 路由跳转\n                _this2.$router.push('/employee');\n              }\n            } else {\n              _this2.$message.error(res.data.msg);\n            }\n          });\n        } else {\n          alert('校验失败');\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",{"version":3,"sources":["F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\JavaCode\\Sky-Delivery\\Sky-Delivery\\project-sky-admin-vue-ts\\src\\views\\employee\\addEmployee.vue?vue&type=script&lang=ts&"],"names":[],"mappings":"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","sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport {addEmployee, queryEmployeeById, updateEmployee} from '@/api/employee'\r\nexport default {\r\n  data() {\r\n    return {\r\n      optType: '',\r\n      ruleForm: {\r\n        name: '',\r\n        username: '',\r\n        sex: '1',\r\n        phone: '',\r\n        idNumber: ''\r\n      },\r\n      rules: {\r\n        name: [\r\n          { required: true, message: '请输入员工姓名', trigger: 'blur' },\r\n        ],\r\n        username: [\r\n          { required: true, message: '请输入员工账号', trigger: 'blur' },\r\n        ],\r\n        phone: [\r\n          { required: true, trigger: 'blur', \r\n            validator: (rule, value, callback) => {\r\n              // alert(value)\r\n              if(value === '' || (!/^1[3-9]\\d{9}$/.test(value))){\r\n                callback(new Error('请输入正确的手机号!'))\r\n              } else {\r\n                callback()\r\n              }\r\n            } \r\n          },\r\n        ],\r\n        idNumber: [\r\n          { required: true, trigger: 'blur', \r\n            validator: (rule, value, callback) => {\r\n              // alert(value)\r\n              if(value === '' || (!/(^\\d{15}$)|(^\\d{17}[0-9Xx]$)/.test(value))){\r\n                callback(new Error('请输入正确的身份证号!'))\r\n              } else {\r\n                callback()\r\n              }\r\n            } \r\n          },\r\n        ]\r\n      }\r\n    }\r\n  },\r\n\r\n  created(){\r\n    // 获取路由参数id，如果有则为修改操作，否则为新增操作\r\n    this.optType = this.$route.query.id ? 'update' : 'add'\r\n    if(this.optType === 'update'){\r\n      // 修改操作，根据id查询员工信息，用于回显\r\n      queryEmployeeById(this.$route.query.id).then((res) => {\r\n        if(res.data.code === 1){\r\n          this.ruleForm = res.data.data\r\n        }\r\n      })\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    submitForm(formName, isContinue){\r\n      // 进行表单校验\r\n      this.$refs[formName].validate((valid) => {\r\n        if(valid){\r\n          // alert('符合要求')\r\n          // 表单校验通过\r\n          if(this.optType === 'update'){\r\n            // 修改操作\r\n            updateEmployee(this.ruleForm).then(\r\n              (res) => {\r\n                if(res.data.code === 1){\r\n                  this.$message.success('员工信息修改成功!')\r\n                  this.$router.push('/employee')\r\n                } else {\r\n                  this.$message.error(res.data.msg)\r\n                }\r\n              }\r\n            )\r\n            return\r\n          }\r\n          // 发送AJAX请求\r\n          addEmployee(this.ruleForm).then((res) => {\r\n            if (res.data.code === 1){\r\n              this.$message.success('员工添加成功')\r\n              // 保存并继续\r\n              if (isContinue){\r\n                this.ruleForm = {\r\n                  name: '',\r\n                  username: '',\r\n                  sex: '1',\r\n                  phone: '',\r\n                  idNumber: ''\r\n                }\r\n              }else{\r\n                // 路由跳转\r\n                this.$router.push('/employee')\r\n              }\r\n            } else {\r\n              this.$message.error(res.data.msg)\r\n            }\r\n          })\r\n        } else {\r\n          alert('校验失败')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":""}]}